{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'css/chapters_styles.css' %}">

    <div class="chapters_container">



        <div class="buttons_container">
            {% for i in mod_list %}
            <!-- forloop.counter - var which exist in for-tag and means number of iteration (1,2,3,...,end).
                There exist different vars ( https://docs.djangoproject.com/en/4.1/ref/templates/builtins/ )-->

            <!-- |stringformat:"i" - formating to the string
                (https://docs.python.org/2/library/stdtypes.html#string-formatting-operations) -->

            <!-- if-condition is need for setting of >id="defaultOpen"<, which used by script below.
                When str(forloop.counter) in url.path or str(0) in url.path then >id="defaultOpen"< is added to
                 button properties and script toggle the button to active -->
            <!-- ???? need think about using js insted django ???? -->
                {% if forloop.counter|stringformat:"i" in request.path or '0' in request.path %}
                    <button class="tablinks" onclick="openDataList(event, '{% trans i.1 %}')" id="defaultOpen">
                        <div class="tab_container">
                            {% trans i.1 %}
                            <div class="add_place_holder">
                                {% if i.0 == 'CustomUser' %}
                                    <a class="tab_add" class href="{% url 'Users:signUp' %}">+</a>
                                {% else%}
                                    <a class="tab_add" class href="{% url 'Main_site:add_data' i.0 %}">+</a>
                                {% endif %}
                            </div>
                        </div>
                    </button>
                {% else %}
                    <button class="tablinks" onclick="openDataList(event, '{% trans i.1 %}')">
                        <div class="tab_container">
                            {% trans i.1 %}
                            <div class="add_place_holder">
                                {% if i.0 == 'CustomUser' %}
                                    <a class="tab_add" class href="{% url 'Users:signUp' %}">+</a>
                                {% else%}
                                    <a class="tab_add" class href="{% url 'Main_site:add_data' i.0 %}">+</a>
                                {% endif %}
                            </div>
                        </div>
                    </button>
                {% endif %}
            {% endfor %}
        </div>


        {% for i in mod_list %}
            <div id="{% trans i.1 %}" class="tabcontent">
                {% for j in i.2  %}
                    <div class="content">

                        {% if i.0 == 'CustomUser' %}
                            <a href="{% url 'Users:signUpEditMult' j.id  %}" class="href">href</a>
                        {% else %}
                            <a href="{% url 'Main_site:edit_data' i.0 j.slug %}" class="href">href</a>
                        {% endif %}

                        <div class="edit_content">
                            <img src="{% static 'icons/edit_note_FILL0_wght700_GRAD0_opsz48.svg' %}" class="edit_icon">
                        </div>

                        <div class="data_content">
                            <div class="data_name">
                                {{j}}
                            </div>
                            <div class="data_path">

                                {%if j.equipment_category%}
                                    \ {{j.equipment_category}}
                                {% endif %}

                                {%if j.equipment_class%}
                                    \ {{j.equipment_class}}
                                {% endif %}

                                {%if user.is_superuser %}
                                    {% if j.company %}
                                        \ {{j.company}}
                                    {% endif %}
                                {% endif %}

                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
    </div>


    <script>
        function openDataList(evt, chapterName) {
          var i, tabcontent, tablinks;
          tabcontent = document.getElementsByClassName("tabcontent");
          for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
          }
          tablinks = document.getElementsByClassName("tablinks");
          for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
          }
          document.getElementById(chapterName).style.display = "block";
          evt.currentTarget.className += " active";
        }

        // Get the element with id="defaultOpen" and click on it
        document.getElementById("defaultOpen").click();
    </script>


{% endblock %}